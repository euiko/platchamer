/* prolog */
#define PROLOG \
"%%%%BeginProlog\n"\
"/xbgidict 100 dict def\n"\
"xbgidict begin\n"\
"%%\n"\
"%% <left> <top> <right> <bottom> box\n"\
"%%\n"\
"/boxdict 5 dict def\n"\
"/box {\n"\
"boxdict begin\n"\
"/bottom exch def\n"\
"/right exch def\n"\
"/top exch def\n"\
"/left exch def\n"\
"left top moveto\n"\
"right top lineto\n"\
"right bottom lineto\n"\
"left bottom lineto\n"\
"left top lineto\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"%%\n"\
"%% <x> <y> <stangle> <endangle> <xradius> <yradius> ellipse\n"\
"%%\n"\
"/ellipsedict 8 dict def\n"\
"ellipsedict /mtrx matrix put\n"\
"/ellipse {\n"\
"ellipsedict begin\n"\
"/yradius exch def\n"\
"/xradius exch def\n"\
"/endangle exch def\n"\
"/stangle exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"/savematrix mtrx currentmatrix def\n"\
"x y translate\n"\
"xradius yradius scale\n"\
"0 0 1 stangle endangle arc\n"\
"savematrix setmatrix\n"\
"end\n"\
"} def\n"\
"%%\n"\
"%% <pat> <cellsz> <ltx> <lty> <w> <h> patfill\n"\
"%%\n"\
"/patdict 10 dict def\n"\
"/patbyte {\n"\
"currentdict /retstr get exch\n"\
"pat i cellsz mod get put\n"\
"} def\n"\
"/patproc {\n"\
"0 1 widthlim {patbyte} for retstr\n"\
"/i i 1 add def\n"\
"} def\n"\
"/patfill {\n"\
"patdict begin\n"\
"/h exch def\n"\
"/w exch def\n"\
"/lty exch def\n"\
"/ltx exch def\n"\
"/cellsz exch def\n"\
"/pat exch def\n"\
"/widthlim w cellsz div cvi 1 sub def\n"\
"/retstr widthlim 1 add string def\n"\
"/i 0 def\n"\
"ltx lty translate\n"\
"w h true [1 0 0 1 0 0] {patproc} imagemask\n"\
"ltx neg lty neg translate\n"\
"end\n"\
"} def\n"\
"%%\n"\
"%% <x> <y> moveto <str> ctext\n"\
"%%\n"\
"/ctext { dup stringwidth pop 2 div neg 0 rmoveto } bind def\n"\
"%%\n"\
"%% <x> <y> moveto <str> rtext\n"\
"%%\n"\
"/rtext { dup stringwidth pop neg 0 rmoveto } bind def\n"\
"%%\n"\
"%% <font> copyfont <font>\n"\
"%%\n"\
"/copyfont {\n"\
"dup maxlength 1 add dict begin {\n"\
"1 index /FID ne 2 index /UniqueID ne and\n"\
"{def} {pop pop} ifelse\n"\
"} forall\n"\
"currentdict\n"\
"end\n"\
"} bind def\n"\
"%%\n"\
"%% <newfont> <asciifont> <kanjifont> jaeucfont\n"\
"%%\n"\
"/jaeucfont {\n"\
"12 dict begin\n"\
"dup type /nametype eq { findfont } if\n"\
"dup /WMode known {\n"\
"dup /WMode get /WMode exch def\n"\
"WMode 1 eq {\n"\
"[0.0 1.0 -1.0 0.0 0.0 0.3] makefont\n"\
"} if\n"\
"} if\n"\
"copyfont dup begin\n"\
"/Encoding Encoding\n"\
"FMapType dup 2 eq {\n"\
"pop 128 128\n"\
"} { 5 eq {\n"\
"256 256\n"\
"} {\n"\
"/compositefont errordict /invalidfont get exec\n"\
"} ifelse\n"\
"} ifelse\n"\
"getinterval def\n"\
"end\n"\
"/kanjifont exch definefont\n"\
"exch\n"\
"dup type /nametype eq { findfont } if\n"\
"exch\n"\
"/FDepVector [ 4 2 roll ] def\n"\
"/FontType 0 def\n"\
"/FMapType 4 def\n"\
"/FontMatrix matrix def\n"\
"/Encoding [ 0 1 ] def\n"\
"/FontBBox {0 0 0 0} def\n"\
"dup /FontName exch def\n"\
"currentdict\n"\
"end\n"\
"definefont pop\n"\
"} def\n"\
"%%\n"\
"%% special thanks to katayama@rd.nacsis.ac.jp for sh script, fixeucfont\n"\
"%%\n"\
"/eucfont {\n"\
"userdict /fixeucfont_dict known not {\n"\
"userdict begin\n"\
"/fixeucfont_dict 2 dict begin\n"\
"/UpperByteEncoding [\n"\
"16#00 1 16#20 { pop 0 } for\n"\
"16#21 1 16#28 { 16#20 sub } for\n"\
"16#29 1 16#2F { pop 0 } for\n"\
"16#30 1 16#74 { 16#27 sub } for\n"\
"16#75 1 16#FF { pop 0 } for\n"\
"] def\n"\
"/LowerByteEncoding [\n"\
"16#00 1 16#A0 { pop /.notdef } for\n"\
"16#A1 1 16#FE { 16#80 sub 16 2 string cvrs\n"\
"(cXX) dup 1 4 -1 roll\n"\
"putinterval cvn } for\n"\
"/.notdef\n"\
"] def\n"\
"currentdict\n"\
"end def\n"\
"end\n"\
"} if\n"\
"12 dict begin\n"\
"dup type /nametype eq { findfont } if\n"\
"dup /WMode known {\n"\
"dup /WMode get /WMode exch def\n"\
"WMode 1 eq {\n"\
"[0.0 1.0 -1.0 0.0 0.0 0.3] makefont\n"\
"} if\n"\
"} if\n"\
"%%\n"\
"%% 7+8 bit EUC font\n"\
"%%\n"\
"12 dict begin\n"\
"/EUCFont exch def\n"\
"/FontInfo (7+8 bit EUC font) readonly def\n"\
"/PaintType 0 def\n"\
"/FontType 0 def\n"\
"/FontMatrix matrix def\n"\
"%% /FontName\n"\
"/Encoding fixeucfont_dict /UpperByteEncoding get def\n"\
"/FMapType 2 def\n"\
"EUCFont /WMode known\n"\
"{ EUCFont /WMode get /WMode exch def }\n"\
"{ /WMode 0 def } ifelse\n"\
"/FDepVector [\n"\
"EUCFont /FDepVector get 0 get\n"\
"[ 16#21 1 16#28 {} for 16#30 1 16#74 {} for ]\n"\
"{\n"\
"13 dict begin\n"\
"/EUCFont EUCFont def\n"\
"/UpperByte exch 16#80 add def\n"\
"%% /FontName\n"\
"/FontInfo (EUC lower byte font) readonly def\n"\
"/PaintType 0 def\n"\
"/FontType 3 def\n"\
"/FontMatrix matrix def\n"\
"/FontBBox {0 0 0 0} def\n"\
"/Encoding fixeucfont_dict /LowerByteEncoding get def\n"\
"%% /UniqueID\n"\
"%% /WMode\n"\
"/BuildChar {\n"\
"gsave\n"\
"exch dup /EUCFont get setfont\n"\
"/UpperByte get\n"\
"2 string\n"\
"dup 0 4 -1 roll put\n"\
"dup 1 4 -1 roll put\n"\
"dup stringwidth setcharwidth\n"\
"0 0 moveto show\n"\
"grestore\n"\
"} bind def\n"\
"currentdict\n"\
"end\n"\
"/lowerbytefont exch definefont\n"\
"} forall\n"\
"] def\n"\
"currentdict\n"\
"end\n"\
"/kanjifont exch definefont\n"\
"exch\n"\
"%%\n"\
"dup type /nametype eq { findfont } if\n"\
"exch\n"\
"%%\n"\
"/FDepVector [ 4 2 roll ] def\n"\
"/FontType 0 def\n"\
"/FMapType 4 def\n"\
"/FontMatrix matrix def\n"\
"/Encoding [ 0 1 ] def\n"\
"/FontBBox {0 0 0 0} def\n"\
"dup /FontName exch def\n"\
"currentdict\n"\
"end\n"\
"definefont pop\n"\
"} def\n"\
"/pointdict 4 dict def\n"\
"/lozengepoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y moveto\n"\
"0 size 2 div rmoveto\n"\
"size 2 div neg size 2 div neg rlineto\n"\
"size 2 div size 2 div neg rlineto\n"\
"size 2 div size 2 div rlineto\n"\
"size 2 div neg size 2 div rlineto\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/crosspoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y moveto\n"\
"0 size 2 div rmoveto\n"\
"0 size neg rlineto\n"\
"size 2 div neg size 2 div rmoveto\n"\
"size 0 rlineto\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/squarepoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y moveto\n"\
"0 size 2 div rmoveto\n"\
"size 2 div neg 0 rmoveto\n"\
"0 size neg rlineto\n"\
"size 0 rlineto\n"\
"0 size rlineto\n"\
"size neg 0 rlineto\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/xcrosspoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y moveto\n"\
"size 2 div neg size 2 div rmoveto\n"\
"size size neg rlineto\n"\
"x y moveto\n"\
"size 2 div size 2 div rmoveto\n"\
"size neg size neg rlineto\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/trianglepoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y moveto\n"\
"0 size 3 sqrt 3 div mul rmoveto\n"\
"size 2 div neg size 3 sqrt 2 div mul neg rlineto\n"\
"size 0 rlineto\n"\
"size 2 div neg size 3 sqrt 2 div mul rlineto\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/asteriskpoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y size crosspoint\n"\
"x y size xcrosspoint\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/circlepoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y size 2 div 0 360 arc\n"\
"closepath\n"\
"end\n"\
"} def\n"\
"/checkmarkpoint {\n"\
"pointdict begin\n"\
"/size exch def\n"\
"/y exch def\n"\
"/x exch def\n"\
"x y moveto\n"\
"size 2 div neg 0 rmoveto\n"\
"size 4 div size 2 div neg rlineto\n"\
"size 4 div 3 mul size rlineto\n"\
"end\n"\
"} def\n"\
"/putpixel {\n"\
"pointdict begin\n"\
"/y exch def\n"\
"/x exch def\n"\
"/size 1 def\n"\
"newpath\n"\
"x y moveto\n"\
"x size add y lineto\n"\
"x size add y size sub lineto\n"\
"x y size sub lineto\n"\
"x y lineto\n"\
"closepath fill\n"\
"end\n"\
"} def\n"\
"/putdot {\n"\
"pointdict begin\n"\
"/y exch def\n"\
"/x exch def\n"\
"/size 0.1 def\n"\
"newpath\n"\
"x size 2 div sub y size 2 div add moveto\n"\
"x size 2 div add y size 2 div add lineto\n"\
"x size 2 div add y size 2 div sub lineto\n"\
"x size 2 div sub y size 2 div sub lineto\n"\
"x size 2 div sub y size 2 div add lineto\n"\
"closepath fill\n"\
"end\n"\
"} def\n"\
ABBREV\
"end\n"\
"%%%%EndProlog\n"
