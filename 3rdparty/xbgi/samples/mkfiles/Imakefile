/*
 * Make sample makefiles for C/C++ programs with xbgi
 *
 * `make -f makefile-c foo.c` can compile your program with main and xbgi
 *
 * Copyright (C) 1992-1994 Taiji Yamada, Tokyo Denki University
 * Copyright (C) 1995-1999 Taiji Yamada, AIHARA Electrical Engineering Co.,Ltd.
 */
#include "../../config.h"

CPPFLAGS = -I$(XBGIINCDIR)
LDFLAGS = -L$(XBGILIBDIR)
LOADLIBES = $(LOCAL_LIBRARIES)

all:: makefile-c makefile-cxx

makefile-c:
	echo "#"						> $@
	echo "# Sample makefile for C programs with xbgi"	>> $@
	echo "#"						>> $@
	echo "CC = $(CC)"					>> $@
	echo "CFLAGS = $(CFLAGS)"				>> $@
	echo "CPPFLAGS = $(CPPFLAGS)"				>> $@
	echo "LDFLAGS = $(LDFLAGS)"				>> $@
	echo "LOADLIBES = $(LOADLIBES)"				>> $@
	echo "LDLIBS = $(LDLIBS)"				>> $@
	echo "EXTRA_LOAD_FLAGS = $(EXTRA_LOAD_FLAGS)"		>> $@
	echo ""							>> $@
	echo "all:"						>> $@
	echo ""							>> $@
	echo ".c:"						>> $@
	echo "	\$$(CC) \$$(CFLAGS) \$$(CPPFLAGS) \$$(LDFLAGS) \$$< \$$(LOADLIBES) \$$(LDLIBS) \$$(EXTRA_LOAD_FLAGS) -o \$$@" >> $@

makefile-cxx:
	echo "#"						> $@
	echo "# Sample makefile for C++ programs with xbgi"	>> $@
	echo "#"						>> $@
	echo ".SUFFIXES: .cxx"					>> $@
	echo ""							>> $@
	echo "CXX = $(CXX)"					>> $@
	echo "CXXFLAGS = $(CFLAGS)"				>> $@
	echo "CPPFLAGS = $(CPPFLAGS)"				>> $@
	echo "LDFLAGS = $(LDFLAGS)"				>> $@
	echo "LOADLIBES = $(LOADLIBES)"				>> $@
	echo "LDLIBS = $(LDLIBS)"				>> $@
	echo "EXTRA_LOAD_FLAGS = $(EXTRA_LOAD_FLAGS)"		>> $@
	echo ""							>> $@
	echo "all:"						>> $@
	echo ""							>> $@
	echo ".cxx:"						>> $@
	echo "	\$$(CXX) \$$(CXXFLAGS) \$$(CPPFLAGS) \$$(LDFLAGS) \$$< \$$(LOADLIBES) \$$(LDLIBS) \$$(EXTRA_LOAD_FLAGS) -o \$$@" >> $@

clean::
	$(RM) makefile-c makefile-cxx

depend::
	$(RM) makefile-c makefile-cxx
